Encrypted Data bags
===================
- we can encrypt attribues in a data bag. it is called as Encrypted data bag. This is imp when we store sensitive data like passwords.
- Encryption & Decryption happens based on a key.


- Creating a key file which is used for Encryption & Decryption.

]$ openssl rand -base64 512 | tr -d '\r\n' > <key file>
]$ openssl rand -base64 512 | tr -d '\r\n' > javahome-databags-key


- Path of the key file

]$ knife data bag create users passwords --secret-file javahome-databags-key



- To see the content of key file

]$ knife data bag show users passwords --secret-file javahome-databags-key


- we need to copy a secret file to the node such that node uses this secret file for decrypting the data



Roles
=========

- in our infrastructure we see web servers, database servers, load balancers etc.

- The benifit of using role is we can group similar servers into one category. for example webservers role.

- the benifit is easy to manage a runlist i.e., we can create web servers role in this role we can mention the run list and we can add all web servers under this role. Down the line we want to change the runlist of all webservers, instead of modifying all the webservers runlist, we can modify the runlist of role

- 


Creating a role
===============

]$ knife role create <role name>

]$ knife role create webservers


Environments
=============

In S/w development we have different environments. for example, Dev, QA, UAT & Prod

For Ex all the environments are having cookbook with a version 0.0.1. & lets say we are developing cookbook for next release which is 0.0.2. First we need deploy the latest version in Dev. i.e., the cookbook version in Dev must be 0.0.2 & in other environments the version 0.0.1. this is achived using Environment



IQ: In chef, I want version of cookbook as 0.0.2 in one environment & 0.0.1 in other environment. Is this possible.
Ans. Yes. Using Environment


IQ: In a Dev Environment we want to install Apache server & Database server on single node. In Prod we want install them on different nodes.
Ans: 



Test Kitchen
============
Using Test Kichen we can speed up the development of our chef cookbooks.

Development approach without Test Kitchen
=========================================

Step1: Write cookbook
Step2: Upload cookbooks to chef server
Step3: Maintain a seperate VM for testing it


Development approach with Test Kitchen
=========================================

]$ kitchen converge

- How to login to the node

]$ kitchen login


Dependency Management in chef
=============================

Some times in our cookbook we use the other cookbooks which is written by community

Ex: we want to install Java and tomcat. for this we can create a cookbook, in this cookbook we can mention the dependencies java & tomcat cookbooks

If java & tomcat depends on other cookbooks, we can call them as transitive dependencies.


we shoud manually download our dependencies & their transitive dependencies follwed by upload all those cookboos to chef dserver & use them for configuring our nodes. 


]$ berks --version

berks
======

It is dependency management tool which takes away all our complex.


Specify dependency in our cookbook
==================================

Under metadata.rb

depends 'java', '~> 1.46.0'



berks install
===============
]$ berks install

this command downlaods dependencies & transitive dependencies.


Uploading dependencies & transitive dependencies to the chef server
====================================================================

]$ berks upload



IQ: I want to stop the upload of a cookbook with specific version to the chef server
Ans: we can use --freeze flag while uploading a cookbook such that no one can upload cookbook with same version



What is wrpper cookbook?

It is a cookbook developed by us which wraps community cookbooks.




--------------------
JIRA
Agile Method
Nagios
Resume preparation
---------------------

























